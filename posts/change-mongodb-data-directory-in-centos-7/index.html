<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Sergey Pogorelov</title><meta name="description" content="Sergey Pogorelov's blog"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato|Roboto"></head><body class="site"></body><div class="site-wrap"><header><nav><a class="logo" href="/">Sergey Pogorelov</a><ul><li> <a class="navigation_active" href="/">Posts</a></li><li><a href="/">About</a></li></ul></nav></header><main><div class="single-post__date"> <span>Written on </span><br><time>November 12, 2018</time></div><h1 class="title">Change MongoDB data directory in CentOS 7</h1><article class="single-post"><p>It might seem simple to change the MongoDB data directory: just adjust the <em><em>/etc/mongod.conf</em></em> file and that’s it.
But it won’t work and here’s where you can meet the SELinux contexts.</p>
<p>Let’s do it step by step:</p>
<ol>
<li>Stop the service:<pre><code class="language-bash">service mongod stop</code></pre>
</li>
<li>Move old DB data directory to a new place (we’ll use <em><em>/mnt/mongo</em></em> as a new path):<pre><code class="language-bash">mv /var/lib/mongo/ /mnt/</code></pre>
</li>
<li>Edit the configuration file:<pre><code class="language-bash">vim /etc/mongod.conf</code></pre>
Replace <em><em>/var/lib/mongo</em></em> with the new path <em><em>/mnt/mongo</em></em><pre><code>...
# Where and how to store data.
storage:
dbPath: /mnt/mongo
...</code></pre></li>
<li>Change new directory owner:<pre><code class="language-bash">chown -R mongod:mongod /mnt/mongo/</code></pre>
</li>
<li>Change SELinux for the new data directory<pre><code class="language-bash">chcon -Rv --type mongod_var_lib_t /mnt/mongo/</code></pre>
</li>
<li>Start service again<pre><code class="language-bash">service mongod start</code></pre>
</li>
</ol>
</article><div class="mail-subscription"><div id="mc_embed_signup"><form action="https://pogorelovs.us19.list-manage.com/subscribe/post?u=142dd8f8b60869d2d72caa67d&amp;amp;id=06768ce50e" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate><div id="mc_embed_signup_scroll"><h4>Like what you read? Subscribe to my new articles!</h4><div class="email-input"><input type="email" value="" name="EMAIL" id="mce-EMAIL" placeholder="Your email address" required><div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_142dd8f8b60869d2d72caa67d_06768ce50e" tabindex="-1" value=""></div><div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"></div></div></div></form></div></div></main></div><footer><div><a href="https://www.linkedin.com/in/sergeioff/">LinkedIn</a></div></footer></html>